<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe â€“ Multiplayer</title>
<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #0f2027;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.game {
  text-align: center;
}

.board {
  display: grid;
  grid-template-columns: repeat(3, 100px);
  gap: 10px;
  margin: 20px auto;
}

.cell {
  width: 100px;
  height: 100px;
  background: #203a43;
  font-size: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  border-radius: 10px;
}

.cell:hover {
  background: #2c5364;
}

.status {
  margin-top: 10px;
  opacity: 0.8;
}
</style>
</head>
<body>

<div class="game">
  <h1>Tic Tac Toe</h1>
  <div class="board" id="board"></div>
  <div class="status" id="status">Waitingâ€¦</div>
</div>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ðŸ”¥ REPLACE WITH YOUR FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "XXXX",
  appId: "XXXX"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Room logic
const params = new URLSearchParams(location.search);
const room = params.get("room") || Math.random().toString(36).slice(2,7);
history.replaceState({}, "", "?room=" + room);

const roomRef = db.ref("rooms/" + room);

let mySymbol = null;
let board = Array(9).fill("");
let turn = "X";

const boardEl = document.getElementById("board");
const statusEl = document.getElementById("status");

// Create board UI
for (let i = 0; i < 9; i++) {
  const cell = document.createElement("div");
  cell.className = "cell";
  cell.onclick = () => makeMove(i);
  boardEl.appendChild(cell);
}

// Join room
roomRef.child("players").once("value", snap => {
  const count = snap.numChildren();
  mySymbol = count === 0 ? "X" : "O";
  roomRef.child("players").push(mySymbol);
  statusEl.textContent = "You are " + mySymbol;
});

// Listen for updates
roomRef.on("value", snap => {
  const data = snap.val();
  if (!data) return;

  board = data.board || board;
  turn = data.turn || turn;

  updateUI();
});

function makeMove(i) {
  if (board[i] || turn !== mySymbol) return;

  board[i] = mySymbol;
  turn = mySymbol === "X" ? "O" : "X";

  roomRef.update({ board, turn });
}

function updateUI() {
  [...boardEl.children].forEach((c, i) => c.textContent = board[i]);
  statusEl.textContent = turn === mySymbol ? "Your turn" : "Opponent's turn";
}
</script>

</body>
</html>